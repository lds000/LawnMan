<UserControl x:Class="BackyardBoss.Views.ProgramEditorView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:vm="clr-namespace:BackyardBoss.ViewModels"
             xmlns:viewModels="clr-namespace:BackyardBoss.ViewModels"

             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:usercontrols="clr-namespace:BackyardBoss.UserControls"
             mc:Ignorable="d"
             Background="#111111">
    <UserControl.DataContext>
        <vm:ProgramEditorViewModel />
    </UserControl.DataContext>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header with Clock and Season Slider -->
        <DockPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="{Binding CurrentTime}" FontSize="24" Foreground="White" DockPanel.Dock="Left" />
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <TextBlock Text="Seasonal Adj (%):" Foreground="White" FontSize="16" Margin="0,0,10,0" VerticalAlignment="Center" />
                <Slider Width="200" Minimum="50" Maximum="200" Value="{Binding Schedule.SeasonalAdjustment}" TickFrequency="10"
                        IsSnapToTickEnabled="True" VerticalAlignment="Center" />
            </StackPanel>
        </DockPanel>

        <!-- Main Panel -->
        <StackPanel Grid.Row="1" Orientation="Vertical">
            <!-- Zone Controls -->
            <StackPanel Orientation="Vertical" Margin="0,0,0,20">
                <TextBlock Text="Zone Durations"
               FontSize="20" Foreground="White"
               FontWeight="Bold" Margin="0,0,0,10" />

                <ItemsControl ItemsSource="{Binding Schedule.Sets}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Vertical" Margin="0,0,0,10">
                                <TextBlock Text="{Binding SetName}" Foreground="White" FontSize="16" />
                                <Slider Minimum="0" Maximum="30"
                            Value="{Binding RunDurationMinutes, Mode=TwoWay}"
                            Height="30"
                            TickFrequency="1" IsSnapToTickEnabled="True"
                            TickPlacement="BottomRight"
                            Ticks="0,5,10,15,20,25,30" />
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>


            <!-- Two Week Scheduler (14 Toggle Grids) -->
            <StackPanel Orientation="Vertical" Margin="0,0,0,20">
                <TextBlock Text="Schedule Days (2 Weeks)" FontSize="20" Foreground="White" FontWeight="Bold" Margin="0,0,0,10" />
                <UniformGrid Rows="2" Columns="7" Margin="0,5">
                    <ToggleButton Content="Sun 1" IsChecked="{Binding Schedule.Week1Sunday}" />
                    <ToggleButton Content="Mon 1" IsChecked="{Binding Schedule.Week1Monday}" />
                    <ToggleButton Content="Tue 1" IsChecked="{Binding Schedule.Week1Tuesday}" />
                    <ToggleButton Content="Wed 1" IsChecked="{Binding Schedule.Week1Wednesday}" />
                    <ToggleButton Content="Thu 1" IsChecked="{Binding Schedule.Week1Thursday}" />
                    <ToggleButton Content="Fri 1" IsChecked="{Binding Schedule.Week1Friday}" />
                    <ToggleButton Content="Sat 1" IsChecked="{Binding Schedule.Week1Saturday}" />
                </UniformGrid>
                <UniformGrid Rows="2" Columns="7">
                    <ToggleButton Content="Sun 2" IsChecked="{Binding Schedule.Week2Sunday}" />
                    <ToggleButton Content="Mon 2" IsChecked="{Binding Schedule.Week2Monday}" />
                    <ToggleButton Content="Tue 2" IsChecked="{Binding Schedule.Week2Tuesday}" />
                    <ToggleButton Content="Wed 2" IsChecked="{Binding Schedule.Week2Wednesday}" />
                    <ToggleButton Content="Thu 2" IsChecked="{Binding Schedule.Week2Thursday}" />
                    <ToggleButton Content="Fri 2" IsChecked="{Binding Schedule.Week2Friday}" />
                    <ToggleButton Content="Sat 2" IsChecked="{Binding Schedule.Week2Saturday}" />
                </UniformGrid>
            </StackPanel>

            <!-- Start Times with RadialTimePickers -->
            <StackPanel Orientation="Vertical">
                <TextBlock Text="Start Times" FontSize="20" Foreground="White" FontWeight="Bold" />


                <ItemsControl ItemsSource="{Binding StartTimes}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Margin="0,5">
                                <TextBox Width="100" Text="{Binding Time, Mode=TwoWay}" Margin="5" />
                                <Button Content="Pick Time"
                        Width="100"
                        Command="{Binding DataContext.OpenTimePickerCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        CommandParameter="{Binding}" />
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </StackPanel>

        <!-- Footer Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
            <Button Content="Auto" Width="100" Height="40" Margin="5,0" />
            <Button Content="Off" Width="100" Height="40" Margin="5,0" />
            <Button Content="Run Once" Width="100" Height="40" Margin="5,0" />
            <Button Content="Reset" Width="100" Height="40" Background="DarkRed" Foreground="White" Margin="5,0" />
        </StackPanel>
    </Grid>
</UserControl>
